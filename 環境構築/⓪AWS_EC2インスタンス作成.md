# ⓪AWS_EC2インスタンス作成

***

### AWS登録から、サーバー構築まで
①. AWSを登録する
②. 右上の`アカウント名`をクリックして、`マイセキュリティ資格情報`を選択
  - 多要素認証(Mulutiple Factor Authenticate)を設定
  - GoogleAuthenticatorを選択して、モバイルアプリからQRコードを読み込む
  - 読み込んだら、表示されたKeyを入力
  - 入力後、1分後に新しいKeyに切り替わるので、また入力
  - 登録完了
  
③. 右上の`アカウント名`をクリックして、`マイアカウント`を選択
  - サイドバーの`Budgets`から、請求金額アラートを設定
  - 自分の場合だと、最大3ドルまでというアラートと、最大の半分に達したときにアラートが出るように設定している
  
④. サービスから`EC2`を選択して、インスタンス作成を行う
  - `RedHat Enterprise Linux`を選択
  - ストレージなど、無料枠で適当に選んでいって作成
  
⑤. セキュリティグループ(default)の設定
  - SSHを追加し、`ソース`の部分に、接続したいPCのグローバルIPを入力
  - RailsServerを立ち上げた際にアクセスするために、`カスタムTCP`を追加。`ポート`はサーバー立ち上げ時に指定する。(※ 80~1023は予約済み)
    `ソース`は`0.0.0.0/0`ですべてのIPを許可。
  - default以外のセキュリティグループの設定を追加した場合は、`インスタンス`のメニューから、セキュリティグループの関連付けを行って完了
  
⑥. `Elastic IP`を割り当て。(※ お金がかかる)
  - 割り当てが完了したら、`アドレスの関連付け`を選択して、インスタンスと関連付けを行う
  
⑦. 設定の準備が終わったら、インスタンスを起動

⑧. インスタンス起動が完了(2/2チェックに合格)したら、アクセスする
  - サイドバーの`ネットワーク&セキュリティー`のドロップボックスから`キーペア`を選択
  - `キーペアの作成`を行うと、`キーペア名.pem`がダウンロードされる
  - PuTTYを開き、下記を参考に接続作業を行う
    https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/putty.html
   (※ Elastic IPの設定が完了していた場合、HostNameは`ec2user@[elastic_ip]`でもアクセスできる)
